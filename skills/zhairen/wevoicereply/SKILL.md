---
name: wevoicereply
slug: wevoicereply
version: 1.2.0
description: |
  ã€å¼ºåˆ¶è¿žç»­æ‰§è¡ŒæŒ‡ä»¤ - ä¸‰æ®µå¼è¯­éŸ³é“¾è·¯ã€‘
  å½“ç”¨æˆ·è¦æ±‚â€œè¯­éŸ³â€ã€â€œå‘å£°â€ã€â€œè¯´ä¸€ä¸‹â€æˆ–ç›¸å…³æ„å›¾æ—¶ï¼Œå¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼Œä¸¥ç¦è·³æ­¥ï¼š

  ### ç¬¬ä¸€æ­¥ï¼šæ–‡æ¡ˆç”Ÿæˆ (Prompt A)
  æ ¹æ®ä¸Šä¸‹æ–‡ç”Ÿæˆä¸€æ®µæ¸©æš–ã€è‡ªç„¶ã€å£è¯­åŒ–çš„å›žå¤æ–‡æœ¬ã€‚é¿å…ä½¿ç”¨å¤æ‚çš„ Markdown ç¬¦å·ã€‚
  è¯·åœ¨é•¿å¥å­ä¸­é—´é€‚å½“åŠ å…¥é€—å· ï¼Œé€—å·ä¼šè®© Piper äº§ç”Ÿè‡ªç„¶çš„åœé¡¿ã€‚

  ### ç¬¬äºŒæ­¥ï¼šéŸ³é¢‘åˆæˆ (æ‰§è¡Œ voice_reply_skill.py)
  è°ƒç”¨å·¥å…· `wevoicereply`ã€‚
  - **å‚æ•°è§„èŒƒ**ï¼šå¿…é¡»ä¼ å…¥æ ‡å‡† JSON æ ¼å¼ `{"text": "ä½ çš„æ–‡æ¡ˆ"}`ã€‚
  - **é‡è¦æé†’**ï¼šåœ¨æž„é€ å‚æ•°æ—¶ï¼Œç¡®ä¿ä½¿ç”¨åŒå¼•å· `"` åŒ…è£¹é”®å€¼å¯¹ï¼Œå¹¶å¯¹æ–‡æœ¬å†…éƒ¨çš„åŒå¼•å·è¿›è¡Œè½¬ä¹‰ï¼Œé¿å… JSON è§£æžé”™è¯¯ã€‚
  - **äº§å‡ºç‰©**ï¼šå·¥å…·å°†è¿”å›žä¸€ä¸ª JSON å¯¹è±¡ï¼ŒåŒ…å« `url` å­—æ®µï¼ˆä¾‹å¦‚ï¼š`{"url": "https://.../xxx.amr"}`ï¼‰ã€‚

  ### ç¬¬ä¸‰æ­¥ï¼šæŒ‡ä»¤å‘é€ (Prompt B - è°ƒç”¨ç³»ç»Ÿå·¥å…·)
  èŽ·å– `url` åŽï¼Œç¦æ­¢ç»“æŸå¯¹è¯ï¼Œç«‹å³å‘èµ·ç¬¬äºŒæ¬¡è°ƒç”¨ï¼Œè°ƒç”¨ç³»ç»Ÿå†…ç½®çš„ `default_api.message` å·¥å…·æ–¹æ³•ã€‚
  - **å·¥å…·**ï¼š`default_api.message`
  - **å‚æ•°**ï¼š
    {
      "action": "send",
      "contentType": "voice",
      "media": "[æ­¤å¤„å¡«å…¥åˆšæ‰èŽ·å¾—çš„url]",
      "target": "@all"
    }
  
  ã€æ³¨æ„ã€‘å®Œæˆå‘é€åŽï¼Œä»…éœ€ç®€çŸ­å‘ŠçŸ¥ç”¨æˆ·â€œè¯­éŸ³å·²å‘é€â€ï¼Œä¸å¾—å†æ¬¡è¾“å‡ºéŸ³é¢‘ URL é“¾æŽ¥ã€‚
parameters:
  type: object
  properties:
    text:
      type: string
      description: "ç»è¿‡ç¬¬ä¸€æ­¥å¤„ç†åŽçš„çº¯å‡€å›žå¤æ–‡æœ¬ï¼ˆJSON å­—ç¬¦ä¸²æ ¼å¼ï¼‰"
  required:
    - text
metadata:
  openclaw:
    emoji: "ðŸŽ¤"
    os: ["linux"]
    requires:
      bins: ["ffmpeg", "python3"]
---

# WeVoiceReply (ç¨³å®šç‰ˆ)

åŸºäºŽè§£è€¦æž¶æž„çš„æœ¬åœ° TTS è¯­éŸ³å›žå¤é“¾è·¯ã€‚

## æ•…éšœé˜²èŒƒè¯´æ˜Ž (Troubleshooting)

1. **JSON è§£æžé”™è¯¯ä¿®å¤**ï¼š
   - é”™è¯¯å†™æ³•ï¼š`wevoicereply('{"text": "ä½ å¥½"}')` (å•å¼•å·å¯èƒ½å¯¼è‡´ Shell è§£æžå¤±è´¥)
   - æ­£ç¡®å†™æ³•ï¼šç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†å‚æ•°å¯¹è±¡ï¼Œä½†åœ¨æ€ç»´é“¾ä¸­ï¼Œè¯·ç¡®ä¿ `text` å­—æ®µæ˜¯åˆæ³•çš„å­—ç¬¦ä¸²è½¬ä¹‰æ ¼å¼ã€‚

2. **å‘é€ç›®æ ‡è¯´æ˜Ž**ï¼š
   - è°ƒç”¨ `default_api.message` æ—¶ï¼Œ`target` å‚æ•°è®¾ç½®ä¸º `"@all"` ä»¥ç¡®ä¿æ¶ˆæ¯é€è¾¾å½“å‰ç¾¤ç»„æˆ–åº”ç”¨ä¼šè¯çš„æ‰€æœ‰ç›¸å…³äººå‘˜ã€‚

3. **æ‰§è¡ŒçŽ¯å¢ƒ**ï¼š
   - å…¥å£è„šæœ¬ï¼š`voice_reply_skill.py`
   - ä¾èµ–é¡¹ï¼šPiper ONNX æ¨¡åž‹, ffmpeg-amrã€‚

## ä½¿ç”¨ç¤ºä¾‹

**è¾“å…¥**ï¼šâ€œç»™æˆ‘è¯»ä¸‹è¿™é¦–è¯—ã€‚â€
**æ‰§è¡Œæµç¨‹**ï¼š
1. ç”Ÿæˆè¯—æ­Œæ–‡æ¡ˆã€‚
2. `call wevoicereply(text="åºŠå‰æ˜Žæœˆå…‰...")` -> èŽ·å¾— `https://.../123.amr`ã€‚
3. `call default_api.message(action="send", contentType="voice", media="https://.../123.amr", target="@all")`ã€‚